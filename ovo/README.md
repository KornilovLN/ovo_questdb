## Программа сбора данных с датчиков с отправкой в БД и консоль

* Вывод в консоль в формате псевдографики 
  <br>с одновременным чтением из компорта ttyUSB0 пакета данных
  <br>и записью результата в окна консоли (в отдельном потоке)

* Данные получает из порта, куда они поступают от Arduino
* Arduino имеет на борту несколько тест-генераторов
  <br>один из которых (4-й) выдает 5 троек чисел float и еще
  <br>2 целых числа, содержащих битовые данные.

* Через компорт поступает строка с числами в формате
  <br>float, разделенных пробелами и символом конца строки в конце
* Частота прихода таких строк ограничена baudrate == 19200
  <br>в данном случае, а частота генерации строки паузой 1000 мс,
  <br>но были испытаны и другие паузы вплоть до 10 мс  

* Программа была модифицирована:
  <br>Добавлена функциональность формирования сообщения
  <br>для записи в таблицу БД questdb соответствующего формата данных.

* Для записи в БД (из приложения на C++) используется библиотека curl:
``` 
#include <curl/curl.h>
```

* Данные для записи в БД формируются в строке, которая отсылается в БД.

#### Формат таблицы для сообщений из ПО сбора данных:
``` 
   std::string createTableQuery = R"(
        CREATE TABLE IF NOT EXISTS sensors (
            timestamp TIMESTAMP,
            PWM_Ten DOUBLE,
            PWM_Led DOUBLE,
            PWM_Vent DOUBLE,
            DHT_Temperature DOUBLE,
            DHT_Humidity DOUBLE,
            DHT_Light DOUBLE,
            DS_Temperature1 DOUBLE,
            DS_Temperature2 DOUBLE,
            DS_Temperature3 DOUBLE,
            BME_Temperature DOUBLE,
            BME_Humidity DOUBLE,
            BME_Pressure DOUBLE,
            Port INT,
            Alarm INT
        )
    )";
 ```   

  #### Аппаратное обеспечение:
 * Arduino Uno
 * Sensors DHT11,BME280,DS18B20(3 шт),DHT-Light,PWM(3 шт)
 * UART-USB <--> USB-computer
 * USB-hub
  
 #### Программное обеспечение Arduino:
 * Сборщик данных с датчиков
 * Усреднитель данных
 * Формирователь сообщений для ведущего компьютера
 * Отправка сообщений в компьютер
 
 #### Программное обеспечение компьютера:
 * Прием строки сообщений от Arduino
 * Парсинг строки сообщений
 * Запись данных в БД
 * Вывод данных в консоль в псевдографическом виде.
 
 #### Программное обеспечение удаленного сервера БД:
 * Контейнер с последней версией БД QuestDB
 * WEB-интерфейс к БД QuestDB через браузер:
   <br>https://<URL-site-with_QuestDB>:9000 
 
 #### Авторство
 * Author:  Starmark LN (Kornilov LN)
 * e-mail:  ln.KornilovStar@gmail.com
 *          ln.starmark@ekatra.io
 *          ln.starmark@gmail.com
 * date:    21.06.2023
 
 

 